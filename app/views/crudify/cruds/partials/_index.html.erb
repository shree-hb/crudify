<style>
    table, th, td {
        border: 2px solid #F5F0F5;
        margin: 10px 10px 10px 10px;
        padding: 10px 10px 10px 10px;
    }
</style>
<br/>

<br/>
<% if @contents.present? %>
  <div class="form-style-2-heading"><%= @contents.first.class.to_s.titleize %> Listing </div>
  <div style="overflow: hidden;width: 100%;">
    <span>
      <%= link_to 'Delete Selected', '#', id: 'deleteLink',class: 'button-link' %> &nbsp;&nbsp;
      <%= hidden_field_tag 'model', @model_class, id: 'slected_model' %>
      <%= link_to "Add new #{@contents.first.class}", new_crud_path(model: @contents.first.class), class: 'button-link' %>
    </span>
    <span style='color:red;font-weight:bold;float: right;
    padding: 0 40px 12px 0;font-size: medium;'> Deleted Count : <%= delete_count(@model_class) %> </span>
    <table class="table table-bordered" style="overflow-x: auto;width: 100%;margin: 0;1px solid #080808">
      <tbody>
        <tr>
          <th style="background-color:#eeeeee;"> Action  </th>
          <% @contents.first.class.crud_col_hash.keys.each do |ct|  %>
            <th style="background-color:#eeeeee;"><%= ct.to_s.humanize.capitalize %></th>
          <%end%>
          
        </tr>
        <% @contents.each do |cont| %>
          <tr>
              <td> 
                  <% action_tag = get_action_tag(cont).presence %>
                  <% if action_tag %>
                    <%= action_tag&.html_safe %>
                  <% else %>
                    <%= check_box_tag 'record_ids[]', "#{cont.id}|#{cont.class.name}", false, class: "record-checkbox"%>
                    <%= link_to "Edit",  edit_crud_path(cont, model: cont.class), query: {model: cont.class} %> 
                  <% end %>
              </td>
            <% @contents.first.class.crud_col_hash.keys.each do |ct|  %>
              <td style="max-width: 200px;overflow: hidden; white-space: normal;text-overflow: ellipsis;">
                <% skip_relation = cont.class&.skip_relation&.respond_to?(:include?) && cont.class&.skip_relation&.include?(ct) %>
                <% if ct.match(/_id$/) && !skip_relation %>
                  <% relational_model = ct.to_s.split(/_id$/)[0] %>
                  <% relational_obj = cont.send(relational_model) %>
                  
                  <% if relational_obj %>
                    <%= relational_obj.send(relational_obj.class.relational_display_col) %>
                  <%end%>
                <%else%>
                  <%= cont.send(ct) %>
                <%end%>
              </td>
            <%end%>
              
          </tr>
        <% end %>
      <tbody>
      </table>
  </div>
<% else %>

<% end %>
